#!/usr/bin/env ruby

$:.insert(0, 'lib')

require 'thor'
require 'rly'
require 'pry'
require 'parser.rb'
require 'lexer.rb'

module Mm2ep
  module Depend

    class ParseCli < Thor
      desc 'parse INFILE', 'Parse INFILE into tokens'
      def parse(infile)

        File.open(infile).each_line do |line|
          parser = Parser.new(Lexer.new)
          token = parser.parse(line.chomp)
          puts token
        end
      end
    end
  end
end

Mm2ep::Depend::ParseCli.start(ARGV)
